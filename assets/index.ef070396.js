var U=(r,s,i)=>new Promise((c,e)=>{var o=u=>{try{d(i.next(u))}catch(S){e(S)}},t=u=>{try{d(i.throw(u))}catch(S){e(S)}},d=u=>u.done?c(u.value):Promise.resolve(u.value).then(o,t);d((i=i.apply(r,s)).next())});import{v as V,r as m,o as a,c as l,a as n,b as w,w as b,F as _,d as g,e as C,t as h,f as E,g as f,n as y,h as v,i as k,j as N,k as A,p as x,l as W,m as O,q as P,s as L,u as F}from"./vendor.2400c9c6.js";const R=function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))c(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const t of o.addedNodes)t.tagName==="LINK"&&t.rel==="modulepreload"&&c(t)}).observe(document,{childList:!0,subtree:!0});function i(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerpolicy&&(o.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?o.credentials="include":e.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function c(e){if(e.ep)return;e.ep=!0;const o=i(e);fetch(e.href,o)}};R();function D(r={}){const{immediate:s=!1,onNeedRefresh:i,onOfflineReady:c,onRegistered:e,onRegisterError:o}=r;let t;const d=(u=!0)=>U(this,null,function*(){});return"serviceWorker"in navigator&&(t=new V("/weather-app/sw.js",{scope:"/weather-app/",type:"classic"}),t.addEventListener("activated",u=>{u.isUpdate?window.location.reload():c==null||c()}),t.register({immediate:s}).then(u=>{e==null||e(u)}).catch(u=>{o==null||o(u)})),d}var p=(r,s)=>{const i=r.__vccOpts||r;for(const[c,e]of s)i[c]=e;return i};const H={data(){return{newUserName:this.$store.state.userInfo}}},T={key:0},G={class:"d-flex flex-row justify-content-around"},M={class:"p-2"},q=g("Search"),B={class:"p-2"},j=g("Global weather"),K={class:"p-2"},Y=g(" My favorites "),z={class:"p-2"},J=g("Sign up");function Q(r,s,i,c,e,o){const t=m("RouterLink"),d=m("RouterView");return a(),l(_,null,[(a(),l("nav",T,[n("ul",G,[n("li",M,[w(t,{to:"/"},{default:b(()=>[q]),_:1})]),n("li",B,[w(t,{to:"/global"},{default:b(()=>[j]),_:1})]),n("li",K,[w(t,{to:`/saved/${e.newUserName.length>0?this.newUserName[0].userName:""}`},{default:b(()=>[Y]),_:1},8,["to"])]),n("li",z,[w(t,{to:"/signup"},{default:b(()=>[J]),_:1})])])])),n("main",null,[w(d)])],64)}var X=p(H,[["render",Q]]);const Z={created(){C.get(`https://api.openweathermap.org/data/2.5/weather?q=${this.city}&units=metric&appid=${this.api_key}`).then(r=>this.weather=r.data)},data(){return{weather:null,city:this.cityName,api_key:"c0712f846b37bb7fd2c2c23a1610956e"}},props:{cityName:{type:String,required:!0,default(){}}},computed:{formatDescription(){return this.weather.weather[0].description.charAt(0).toUpperCase()+this.weather.weather[0].description.slice(1)}}},ee={key:0},te={key:1};function se(r,s,i,c,e,o){return e.weather!==null?(a(),l("div",ee,[n("h2",null,h(e.weather.name)+", "+h(e.weather.sys.country),1),n("p",null,h(o.formatDescription),1),n("p",null,h(Math.round(e.weather.main.temp))+"\xB0C",1)])):(a(),l("p",te,"Error"))}var I=p(Z,[["render",se]]);const re={components:{FetchWeather:I},data(){return{favorites:this.$store.state.favorite}}},oe={key:0,class:y("display-5")},ne={key:1,class:y("display-5")},ae={key:2};function ie(r,s,i,c,e,o){const t=m("FetchWeather");return a(),l(_,null,[r.$route.params.userName===""?(a(),l("h1",oe," Hi! Here are your saved cities ")):(a(),l("h1",ne," Hi "+h(this.$route.params.userName)+"! Here are your saved cities ",1)),(a(!0),l(_,null,E(e.favorites,d=>(a(),v(t,{"city-name":d,key:d},null,8,["city-name"]))),128)),e.favorites.length<=0?(a(),l("p",ae,"You haven't saved any cities yet")):f("",!0)],64)}var ce=p(re,[["render",ie]]);const le={components:{SavedWeather:ce}};function ue(r,s,i,c,e,o){const t=m("SavedWeather");return a(),v(t)}var de=p(le,[["render",ue]]);const he={data(){return{searchedCity:null,city:null,weather:null,api_key:"c0712f846b37bb7fd2c2c23a1610956e",addValue:"Add to favorites",searchError:!1}},methods:{weatherOnClick(){C.get(`https://api.openweathermap.org/data/2.5/weather?q=${this.searchedCity}&units=metric&appid=${this.api_key}`).then(r=>{this.weather=r.data}).catch(()=>{this.searchError=!0,this.weather=null}),this.city=this.searchedCity,this.searchedCity=null,this.addValue="Add to favorites",this.searchError=!1},addOnClick(){this.$store.state.favorite.includes(this.city)?this.addValue="Already added to favorites":(this.addValue="Added to favorites",this.$store.commit("saveFavorites",this.city))}},computed:{formatDescription(){return this.weather.weather[0].description.charAt(0).toUpperCase()+this.weather.weather[0].description.slice(1)}}},pe=r=>(x("data-v-ab4ba81c"),r=r(),W(),r),me=pe(()=>n("h1",{class:y("display-1")},"Weather",-1)),_e={key:0},fe=["value"],ye={key:1,class:"warning"};function ve(r,s,i,c,e,o){return a(),l(_,null,[me,k(n("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>e.searchedCity=t),type:"text",onKeyup:s[1]||(s[1]=A((...t)=>o.weatherOnClick&&o.weatherOnClick(...t),["enter"])),placeholder:"Search city..."},null,544),[[N,e.searchedCity]]),n("input",{type:"button",value:"Search",onClick:s[2]||(s[2]=(...t)=>o.weatherOnClick&&o.weatherOnClick(...t)),class:y("btn btn-light")}),e.weather!==null?(a(),l("div",_e,[n("h1",null,h(e.weather.name)+", "+h(e.weather.sys.country),1),n("p",null,h(o.formatDescription),1),n("p",null,h(Math.round(e.weather.main.temp))+"\xB0C",1),n("input",{type:"button",value:e.addValue,onClick:s[3]||(s[3]=(...t)=>o.addOnClick&&o.addOnClick(...t)),class:y("btn btn-light")},null,8,fe)])):f("",!0),e.searchError===!0?(a(),l("p",ye," This city does not exist... Try again! ")):f("",!0)],64)}var we=p(he,[["render",ve],["__scopeId","data-v-ab4ba81c"]]);const $e={components:{SearchWeather:we}};function be(r,s,i,c,e,o){const t=m("SearchWeather");return a(),v(t)}var ge=p($e,[["render",be]]);const ke={components:{FetchWeather:I},data(){return{citiesArray:["Stockholm","Singapore","New York","Sydney","Buenos Aires","Denver","Rom","Cairo","Tokyo","Toronto"]}}},Ne=n("h1",{class:y("display-1")},"Global Weather",-1);function Se(r,s,i,c,e,o){const t=m("FetchWeather");return a(),l(_,null,[Ne,(a(!0),l(_,null,E(e.citiesArray,d=>(a(),v(t,{"city-name":d,key:d},null,8,["city-name"]))),128))],64)}var Ue=p(ke,[["render",Se]]);const Ce={components:{GlobalWeather:Ue}};function Ee(r,s,i,c,e,o){const t=m("GlobalWeather");return a(),v(t)}var xe=p(Ce,[["render",Ee]]);const We={data(){return{submittedName:null,submittedEmail:null,submittedPassword:null,registeredUsers:["Lisa","Sven","Lena","Matteus","Svea"],userExists:!1}},methods:{onAddUser(){this.$emit("new-user",this.submittedName),this.$store.commit("addUser",{userName:this.submittedName,userEmail:this.submittedEmail,userPassword:this.submittedPassword})}},emits:["new-user"],watch:{submittedName(){this.userExists=!!this.registeredUsers.includes(this.submittedName)}}},$=r=>(x("data-v-d2188034"),r=r(),W(),r),Ie={key:0,class:"container"},Ve={class:"form-group"},Ae=$(()=>n("h1",null,"Sign up",-1)),Oe=$(()=>n("label",{for:"userName"},"Username",-1)),Pe={key:0,class:"warning"},Le={class:"form-group"},Fe=$(()=>n("label",{for:"InputEmail"},"Email address",-1)),Re={class:"form-group"},De=$(()=>n("label",{for:"ImputPassword"},"Password",-1)),He={key:1},Te=$(()=>n("h1",null,"Your account information",-1));function Ge(r,s,i,c,e,o){return a(),l(_,null,[r.$store.state.userInfo.length===0?(a(),l("form",Ie,[n("div",Ve,[Ae,Oe,k(n("input",{type:"username",class:"form-control",id:"userName",placeholder:"Enter username","onUpdate:modelValue":s[0]||(s[0]=t=>e.submittedName=t)},null,512),[[N,e.submittedName]]),e.userExists===!0?(a(),l("p",Pe,"Username already exsists")):f("",!0)]),n("div",Le,[Fe,k(n("input",{type:"email",class:"form-control",id:"InputEmail","aria-describedby":"emailHelp",placeholder:"Enter email","onUpdate:modelValue":s[1]||(s[1]=t=>e.submittedEmail=t)},null,512),[[N,e.submittedEmail]])]),n("div",Re,[De,k(n("input",{type:"password",class:"form-control",id:"ImputPassword",placeholder:"Password","onUpdate:modelValue":s[2]||(s[2]=t=>e.submittedPassword=t)},null,512),[[N,e.submittedPassword]])]),n("button",{type:"submit",class:"btn btn-light",onClick:s[3]||(s[3]=(...t)=>o.onAddUser&&o.onAddUser(...t))}," Submit ")])):f("",!0),r.$store.state.userInfo.length>0?(a(),l("div",He,[Te,n("p",null,"Username: "+h(this.$store.state.userInfo[0].userName),1),n("p",null," Email: "+h(this.$store.state.userInfo[0].userEmail),1),n("p",null," Password: "+h(this.$store.state.userInfo[0].userPassword),1)])):f("",!0)],64)}var Me=p(We,[["render",Ge],["__scopeId","data-v-d2188034"]]);const qe={components:{SignUp:Me},data(){return{userName:null}},methods:{onNewUser(r){this.userName=r}}},Be={key:1};function je(r,s,i,c,e,o){const t=m("SignUp");return e.userName===null?(a(),v(t,{key:0,onNewUser:o.onNewUser},null,8,["onNewUser"])):(a(),l("div",Be,[n("p",null,"Thanks for signing up "+h(e.userName)+"!",1)]))}var Ke=p(qe,[["render",je]]),Ye=O({history:P(),routes:[{component:ge,path:"/"},{name:"user",component:de,path:"/saved/:userName?"},{component:xe,path:"/global"},{component:Ke,path:"/signup"}]});const ze={saveFavorites(r,s){r.favorite.push(s)},addUser(r,s){r.userInfo.push(s)}},Je={favorite:[],userInfo:[]};var Qe=L({mutations:ze,state:Je,strict:!0});F(X).use(Ye).use(Qe).mount("#app");D();
